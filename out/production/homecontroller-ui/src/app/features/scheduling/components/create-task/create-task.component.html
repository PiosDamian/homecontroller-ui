<h2 mat-dialog-title>Create task</h2>
<form [formGroup]='form' mat-dialog-content>
  <mat-form-field>
    <mat-label>Name</mat-label>
    <input matInput formControlName='name' type='text'>
  </mat-form-field>
  <mat-form-field>
    <mat-label>Control type</mat-label>
    <mat-select formControlName='controlType'>
      <mat-option value='PERIOD'>Period</mat-option>
      <mat-option value='CRON'>Cron</mat-option>
    </mat-select>
  </mat-form-field>
  <ng-container *ngIf='form.get("controlType").value === "PERIOD"; else cron'>
    <app-period-control formControlName='expression'></app-period-control>
  </ng-container>
  <ng-template #cron>
    <mat-form-field>
      <mat-label>Cron expression</mat-label>
      <input matInput formControlName='expression' type='text'>
    </mat-form-field>
  </ng-template>
  <mat-form-field>
    <mat-label>Type of operation to perform</mat-label>
    <mat-select formControlName='actionType'>
      <mat-option value='SWITCH'>Switch</mat-option>
      <mat-option value='READ_VALUE'>Read value</mat-option>
    </mat-select>
    <mat-error *ngIf='!hasDevices() || true'>No registered devices for this task</mat-error>
  </mat-form-field>
  <ng-container formGroupName='data'>
    <mat-form-field>
      <mat-label>GPIO address</mat-label>
      <mat-select formControlName='address'>
        <mat-option *ngFor='let device of devicesForTyp()'></mat-option>
      </mat-select>
    </mat-form-field>
  </ng-container>
</form>
